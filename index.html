<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Courier Label - Auto Fit</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
    <style>
        @page { size: 10cm 15cm; margin: 0; }
        body { font-family: 'Arial', sans-serif; background: #f0f0f0; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }

        /* Controls */
        .controls {
            width: 10cm; background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); border: 1px solid #ddd;
        }
        .control-group { margin-bottom: 12px; display: flex; gap: 8px; align-items: center; }
        select, .scan-input { padding: 10px; border: 2px solid #ccc; border-radius: 4px; flex-grow: 1; font-size: 14px; }
        
        /* Label Container */
        .label-container {
            width: 10cm; height: 15cm; background: white; padding: 8mm; box-sizing: border-box;
            display: flex; flex-direction: column; border: 2px solid #000; position: relative;
            overflow: hidden;
        }

        /* Header */
        .header { padding: 12px; text-align: center; border-radius: 4px; margin-bottom: 10px; -webkit-print-color-adjust: exact; }
        .theme-st .header { background: #e31e24; color: white; }
        .theme-bluedart .header { background: #003399; color: #ffcc00; }
        
        /* Barcode Area */
        .barcode-section { text-align: center; margin-bottom: 15px; }
        #barcode-canvas { width: 100%; height: auto; max-height: 25mm; }
        .hidden { display: none !important; }

        /* Address Sections - Flex grow ensures they fill space */
        .address-wrapper { flex-grow: 1; display: flex; flex-direction: column; justify-content: space-around; }
        .address-block { margin: 5px 0; }
        .tag { font-weight: bold; font-size: 14pt; color: #e31e24; display: block; border-bottom: 1px solid #ddd; }
        
        /* Auto-fit text area */
        .editable { 
            outline: none; 
            font-size: 13pt; /* Base size, fits to container */
            line-height: 1.3; 
            word-wrap: break-word;
        }

        .footer { border-top: 1px solid #000; padding-top: 8px; font-size: 10pt; font-weight: bold; margin-top: 5px; }

        @media print {
            .controls { display: none !important; }
            body { background: white; padding: 0; }
            .label-container { border: 2px solid #000 !important; margin: 0; }
        }
    </style>
</head>
<body>

    <div class="controls">
        <div class="control-group">
            <select id="courierSelect">
                <option value="st">ST COURIER</option>
                <option value="bluedart">BLUEDART</option>
                <option value="dtdc">DTDC</option>
            </select>
            <label style="font-size:12px;"><input type="checkbox" id="toggleCourier" checked> Header</label>
            <label style="font-size:12px;"><input type="checkbox" id="toggleBarcode" checked> Barcode</label>
        </div>
        <div class="control-group">
            <input type="text" id="scanInput" class="scan-input" placeholder="Type/Scan ID..." autofocus>
            <button onclick="window.print()" style="padding:10px; background:#000; color:#fff; border:none; border-radius:4px; cursor:pointer;">PRINT</button>
            <button onclick="document.getElementById('scanInput').value=''; generateBarcode('58168593206');" style="padding:10px; background:#ccc; border:none; border-radius:4px; cursor:pointer;">CLR</button>
        </div>
    </div>

    <div id="labelMain" class="label-container theme-st">
        
        <div id="headerDiv" class="header">
            <h1 id="display-name" style="margin:0; font-size: 24pt; text-transform: uppercase;">ST COURIER</h1>
        </div>

        <div id="barcodeDiv" class="barcode-section">
            <svg id="barcode-canvas"></svg>
        </div>

        <div class="address-wrapper">
            <div class="address-block">
                <span class="tag">TO:</span>
                <div class="editable" contenteditable="true">
                    <strong>DR. AGARWAL'S EYE HOSPITAL</strong><br>
                    G.K.S. Complex, Door No. 30/1, Ward No. 6, Melur Road,<br>
                    K.K. Nagar, Opp. To Industrial Estate, Madurai, Tamil Nadu,<br>
                    625020 India T: 9566735401
                </div>
            </div>

            <div class="address-block">
                <span class="tag">FROM:</span>
                <div class="editable" contenteditable="true">
                    <strong>Boston Ivy Healthcare Solutions Pvt Ltd</strong><br>
                    C/O:- DHL Supply Chain India Pvt. Ltd.<br>
                    AMR Business Park, Block A, Kodichikkanahalli Main Road,<br>
                    Hongasandra Village, Bangalore South Taluk Bangalore,<br>
                    Karnataka - 560068
                </div>
            </div>
        </div>

        <div class="footer">
            DATE: <span id="curDate"></span>
        </div>
    </div>

    <script>
        const scanInput = document.getElementById('scanInput');
        const courierSelect = document.getElementById('courierSelect');
        const labelMain = document.getElementById('labelMain');
        const displayName = document.getElementById('display-name');
        
        document.getElementById('curDate').innerText = new Date().toLocaleDateString();

        function generateBarcode(text) {
            JsBarcode("#barcode-canvas", text || "58168593206", {
                format: "CODE128",
                width: 2,
                height: 70,
                displayValue: true,
                fontSize: 18
            });
        }

        generateBarcode();

        scanInput.addEventListener('input', () => generateBarcode(scanInput.value));

        // Theme and Toggles
        courierSelect.addEventListener('change', () => {
            labelMain.className = 'label-container theme-' + courierSelect.value;
            displayName.innerText = courierSelect.options[courierSelect.selectedIndex].text;
        });

        document.getElementById('toggleCourier').addEventListener('change', (e) => 
            document.getElementById('headerDiv').classList.toggle('hidden', !e.target.checked));
        
        document.getElementById('toggleBarcode').addEventListener('change', (e) => 
            document.getElementById('barcodeDiv').classList.toggle('hidden', !e.target.checked));
    </script>
</body>
</html>
