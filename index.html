<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Barcode Label System</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
    <style>
        @page { size: 10cm 15cm; margin: 0; }
        body { font-family: 'Arial', sans-serif; background: #f0f0f0; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }

        /* Control Panel */
        .controls {
            width: 10cm; background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); border: 1px solid #ddd;
        }
        .control-group { margin-bottom: 12px; display: flex; gap: 10px; align-items: center; }
        select, .scan-input { padding: 10px; border: 2px solid #ccc; border-radius: 4px; flex-grow: 1; font-size: 14px; }
        .toggle-btn { font-size: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 4px; }

        /* Label Container */
        .label-container {
            width: 10cm; height: 15cm; background: white; padding: 10mm; box-sizing: border-box;
            display: flex; flex-direction: column; border: 2px solid #000; position: relative;
        }

        /* Branding */
        .header { padding: 15px; text-align: center; border-radius: 4px; margin-bottom: 20px; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        .theme-st .header { background: #e31e24; color: white; }
        .theme-bluedart .header { background: #003399; color: #ffcc00; }
        
        /* Barcode Section */
        .barcode-section { text-align: center; margin-bottom: 20px; min-height: 30mm; }
        #barcode-canvas { max-width: 100%; height: auto; }
        .hidden { display: none !important; }

        /* Addresses */
        .address-block { margin: 15px 0; }
        .tag { font-weight: bold; font-size: 15pt; display: block; border-bottom: 2px solid #000; margin-bottom: 5px; }
        .editable { outline: none; font-size: 14pt; line-height: 1.4; min-height: 50px; }

        .footer { margin-top: auto; border-top: 1px solid #000; padding-top: 10px; font-size: 11pt; font-weight: bold; }

        @media print {
            .controls { display: none !important; }
            body { background: white; padding: 0; }
            .label-container { border: 2px solid #000 !important; margin: 0; }
        }
    </style>
</head>
<body>

    <div class="controls">
        <div class="control-group">
            <select id="courierSelect">
                <option value="st">ST COURIER</option>
                <option value="bluedart">BLUEDART</option>
                <option value="dtdc">DTDC</option>
                <option value="xpressbees">XPRESS BEES</option>
            </select>
            <label class="toggle-btn"><input type="checkbox" id="toggleCourier" checked> Courier</label>
            <label class="toggle-btn"><input type="checkbox" id="toggleBarcode" checked> Barcode</label>
        </div>
        <div class="control-group">
            <input type="text" id="scanInput" class="scan-input" placeholder="Type/Scan to Generate Barcode" autofocus>
            <button onclick="window.print()" style="padding:10px 15px; background:#000; color:#fff; border:none; border-radius:4px; cursor:pointer; font-weight:bold;">PRINT</button>
        </div>
    </div>

    <div id="labelMain" class="label-container theme-st">
        
        <div id="headerDiv" class="header">
            <h1 id="display-name" style="margin:0; font-size: 26pt; text-transform: uppercase;">ST COURIER</h1>
        </div>

        <div id="barcodeDiv" class="barcode-section">
            <svg id="barcode-canvas"></svg>
        </div>

        <div class="address-block">
            <span class="tag">TO:</span>
            <div class="editable" contenteditable="true">
                <strong>DR. AGARWAL'S EYE HOSPITAL</strong><br>
                G.K.S. Complex, Madurai, TN - 620020
            </div>
        </div>

        <div class="address-block">
            <span class="tag">FROM:</span>
            <div class="editable" contenteditable="true">
                <strong>Boston Ivy Healthcare Solutions</strong><br>
                Bangalore, Karnataka - 560068
            </div>
        </div>

        <div class="footer">
            DATE: <span id="curDate"></span>
        </div>
    </div>

    <script>
        const scanInput = document.getElementById('scanInput');
        const courierSelect = document.getElementById('courierSelect');
        const labelMain = document.getElementById('labelMain');
        const displayName = document.getElementById('display-name');
        const cToggle = document.getElementById('toggleCourier');
        const bToggle = document.getElementById('toggleBarcode');

        document.getElementById('curDate').innerText = new Date().toLocaleDateString();

        // FUNCTION: Generate Real Barcode
        function generateBarcode(text) {
            if(!text) text = "58168593206"; // Default
            JsBarcode("#barcode-canvas", text, {
                format: "CODE128",
                lineColor: "#000",
                width: 2,
                height: 80,
                displayValue: true,
                fontSize: 20,
                fontOptions: "bold"
            });
        }

        // Initialize with default
        generateBarcode("58168593206");

        // Instant Update as you type
        scanInput.addEventListener('input', () => {
            generateBarcode(scanInput.value);
        });

        // Theme Change
        const themes = {
            st: { name: "ST COURIER", class: "theme-st" },
            bluedart: { name: "BLUEDART", class: "theme-bluedart" },
            dtdc: { name: "DTDC", class: "theme-st" },
            xpressbees: { name: "XPRESS BEES", class: "theme-st" }
        };

        courierSelect.addEventListener('change', () => {
            const theme = themes[courierSelect.value];
            labelMain.className = 'label-container ' + theme.class;
            displayName.innerText = theme.name;
        });

        // Toggles
        cToggle.addEventListener('change', () => document.getElementById('headerDiv').classList.toggle('hidden', !cToggle.checked));
        bToggle.addEventListener('change', () => document.getElementById('barcodeDiv').classList.toggle('hidden', !bToggle.checked));
    </script>
</body>
</html>
