<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Courier Label System - Manual Entry</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
    <style>
        @page { size: 10cm 15cm; margin: 0; }
        body { font-family: 'Arial', sans-serif; background: #f0f0f0; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }

        /* Control Panel */
        .controls {
            width: 10cm; background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); border: 1px solid #ddd;
        }
        .control-group { margin-bottom: 12px; display: flex; gap: 8px; align-items: center; }
        select, .scan-input, .manual-input { padding: 10px; border: 2px solid #ccc; border-radius: 4px; font-size: 14px; }
        .scan-input { flex-grow: 1; border-color: #000; }
        .manual-input { display: none; border-color: #e31e24; }

        /* Label Container with 3cm Bottom Gap */
        .label-container {
            width: 10cm; height: 15cm; background: white; 
            padding: 8mm 8mm 38mm 8mm; /* 3cm + base padding */
            box-sizing: border-box; display: flex; flex-direction: column; 
            border: 2px solid #000; position: relative; overflow: hidden;
        }

        /* Branding */
        .header { padding: 10px; text-align: center; border-radius: 4px; margin-bottom: 10px; -webkit-print-color-adjust: exact; }
        .theme-st .header { background: #e31e24; color: white; }
        .theme-bluedart .header { background: #003399; color: #ffcc00; }
        .theme-custom .header { background: #333; color: #fff; }

        /* Barcode Area */
        .barcode-section { text-align: center; margin-bottom: 15px; }
        #barcode-canvas { width: 100%; height: auto; max-height: 25mm; }
        .hidden { display: none !important; }

        /* Addresses */
        .address-wrapper { flex-grow: 1; display: flex; flex-direction: column; justify-content: flex-start; gap: 12px; }
        .tag { font-weight: bold; font-size: 14pt; color: #e31e24; display: block; border-bottom: 1px solid #000; }
        .editable { outline: none; font-size: 13pt; line-height: 1.3; margin-top: 5px; }

        .footer { border-top: 1px solid #000; padding-top: 5px; font-size: 10pt; font-weight: bold; }

        @media print {
            .controls { display: none !important; }
            body { background: white; padding: 0; }
            .label-container { border: 2px solid #000 !important; margin: 0; }
        }
    </style>
</head>
<body>

    <div class="controls">
        <div class="control-group">
            <select id="courierSelect">
                <option value="st">ST COURIER</option>
                <option value="bluedart">BLUEDART</option>
                <option value="dtdc">DTDC</option>
                <option value="custom">-- CUSTOM NAME --</option>
            </select>
            <input type="text" id="manualCourier" class="manual-input" placeholder="Enter Courier Name...">
        </div>
        
        <div class="control-group">
            <input type="text" id="scanInput" class="scan-input" placeholder="Type/Scan Tracking ID..." autofocus>
        </div>

        <div class="control-group">
            <label style="font-size:12px;"><input type="checkbox" id="toggleCourier" checked> Header</label>
            <label style="font-size:12px;"><input type="checkbox" id="toggleBarcode" checked> Barcode</label>
            <button onclick="window.print()" style="margin-left:auto; padding:8px 20px; background:#000; color:#fff; border:none; border-radius:4px; cursor:pointer; font-weight:bold;">PRINT</button>
        </div>
    </div>

    <div id="labelMain" class="label-container theme-st">
        <div id="headerDiv" class="header">
            <h1 id="display-name" style="margin:0; font-size: 24pt; text-transform: uppercase;">ST COURIER</h1>
        </div>

        <div id="barcodeDiv" class="barcode-section">
            <svg id="barcode-canvas"></svg>
        </div>

        <div class="address-wrapper">
            <div class="address-block">
                <span class="tag">TO:</span>
                <div class="editable" contenteditable="true">
                    <strong>DR. AGARWAL'S EYE HOSPITAL</strong><br>
                    G.K.S. Complex, Door No. 30/1, Ward No. 6, Melur Road,<br>
                    Madurai, Tamil Nadu - 625020 | T: 9566735401
                </div>
            </div>

            <div class="address-block">
                <span class="tag">FROM:</span>
                <div class="editable" contenteditable="true">
                    <strong>Boston Ivy Healthcare Solutions Pvt Ltd</strong><br>
                    C/O:- DHL Supply Chain India Pvt. Ltd.<br>
                    AMR Business Park, Block A, Bangalore, KA - 560068
                </div>
            </div>
        </div>

        <div class="footer">
            DATE: <span id="curDate"></span>
        </div>
    </div>

    <script>
        const scanInput = document.getElementById('scanInput');
        const courierSelect = document.getElementById('courierSelect');
        const manualCourier = document.getElementById('manualCourier');
        const labelMain = document.getElementById('labelMain');
        const displayName = document.getElementById('display-name');
        
        document.getElementById('curDate').innerText = new Date().toLocaleDateString();

        // Barcode Generation
        function generateBarcode(text) {
            JsBarcode("#barcode-canvas", text || "58168593206", {
                format: "CODE128", width: 2, height: 60, displayValue: true
            });
        }
        generateBarcode();
        scanInput.addEventListener('input', () => generateBarcode(scanInput.value));

        // Courier Selection Logic
        courierSelect.addEventListener('change', () => {
            if (courierSelect.value === 'custom') {
                manualCourier.style.display = 'block';
                labelMain.className = 'label-container theme-custom';
                displayName.innerText = "COURIER NAME";
                manualCourier.focus();
            } else {
                manualCourier.style.display = 'none';
                labelMain.className = 'label-container theme-' + courierSelect.value;
                displayName.innerText = courierSelect.options[courierSelect.selectedIndex].text;
            }
        });

        // Manual Courier Entry
        manualCourier.addEventListener('input', () => {
            displayName.innerText = manualCourier.value.toUpperCase() || "COURIER NAME";
        });

        // Visibility Toggles
        document.getElementById('toggleCourier').addEventListener('change', (e) => 
            document.getElementById('headerDiv').classList.toggle('hidden', !e.target.checked));
        document.getElementById('toggleBarcode').addEventListener('change', (e) => 
            document.getElementById('barcodeDiv').classList.toggle('hidden', !e.target.checked));
    </script>
</body>
</html>
